<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>üßπ Pterodactyl Auto Cleaner - RezzX Panel</title>
  <style>
    body {
      background: #0f172a;
      color: #fff;
      font-family: sans-serif;
      padding: 20px;
      text-align: center;
    }
    input, button {
      padding: 10px;
      margin: 10px;
      width: 90%;
      max-width: 500px;
      border-radius: 8px;
      border: none;
    }
    #log {
      margin-top: 20px;
      white-space: pre-wrap;
      background: #1e293b;
      padding: 15px;
      border-radius: 10px;
    }
    .success { color: #22c55e; }
    .fail { color: #ef4444; }
    .info { color: #eab308; }
    #done {
      font-size: 20px;
      margin-top: 15px;
      background: linear-gradient(90deg, red, yellow, lime, cyan, violet);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: bold;
    }
  </style>
</head>
<body>

<h2>üßπ Pterodactyl Auto Cleaner - <span style="color:deepskyblue">RezzX Panel</span></h2>

<input id="plta" placeholder="Masukkan APIKEY Admin (PLTA)" />
<input id="pltc" placeholder="Masukkan APIKEY Client (PLTC)" />
<input id="domain" placeholder="Masukkan Domain Panel (contoh: https://example.com)" />

<br>
<button onclick="hapusServer()">üöÄ Gas Bersihin Server Offline</button>

<div id="log"></div>
<div id="done"></div>

<script>
async function hapusServer() {
  const plta = document.getElementById('plta').value.trim();
  const pltc = document.getElementById('pltc').value.trim();
  const domain = document.getElementById('domain').value.trim();
  const log = document.getElementById('log');
  const done = document.getElementById('done');
  log.innerHTML = '';
  done.innerHTML = '';

  if (!plta || !pltc || !domain) {
    log.innerHTML = `<span class="fail">‚ùå Semua field wajib diisi.</span>`;
    return;
  }

  log.innerHTML = `<span class="info">‚è≥ Memulai proses pembersihan server...</span>\n`;

  try {
    const res = await fetch("https://rzx-cleaner-backend.netlify.app/.netlify/functions/deleteOffline", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ plta, pltc, domain })
    });

    const rawText = await res.text();

    if (!rawText || rawText.trim() === "") {
      throw new Error("Respon kosong dari backend ‚ùå");
    }

    let data;
    try {
      data = JSON.parse(rawText);
    } catch (e) {
      throw new Error("‚ùå Respon bukan JSON valid:\n" + rawText);
    }

    if (data.error) {
      log.innerHTML += `<span class="fail">‚ùå ${data.error}</span>`;
      return;
    }

    (data.log || []).forEach(l => {
      if (l.includes("‚úÖ")) {
        log.innerHTML += `<span class="success">${l}</span>\n`;
      } else if (l.includes("‚ùå")) {
        log.innerHTML += `<span class="fail">${l}</span>\n`;
      } else {
        log.innerHTML += `<span class="info">${l}</span>\n`;
      }
    });

    done.innerHTML = `üéâ SELESAI BRO üéâ`;

    // Reset input
    document.getElementById('plta').value = '';
    document.getElementById('pltc').value = '';
    document.getElementById('domain').value = '';

  } catch (err) {
    log.innerHTML += `\n<span class="fail">‚ùå Error: ${err.message}</span>`;
  }
}
</script>

</body>
</html><!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>üßπ Pterodactyl Auto Cleaner - RezzX Panel</title>
  <style>
    body {
      background: #0f172a;
      color: #fff;
      font-family: sans-serif;
      padding: 20px;
      text-align: center;
    }
    input, button {
      padding: 10px;
      margin: 10px;
      width: 90%;
      max-width: 500px;
      border-radius: 8px;
      border: none;
    }
    #log {
      margin-top: 20px;
      white-space: pre-wrap;
      background: #1e293b;
      padding: 15px;
      border-radius: 10px;
    }
    .success { color: #22c55e; }
    .fail { color: #ef4444; }
    .info { color: #eab308; }
    #done {
      font-size: 20px;
      margin-top: 15px;
      background: linear-gradient(90deg, red, yellow, lime, cyan, violet);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: bold;
    }
  </style>
</head>
<body>

<h2>üßπ Pterodactyl Auto Cleaner - <span style="color:deepskyblue">RezzX Panel</span></h2>

<input id="plta" placeholder="Masukkan APIKEY Admin (PLTA)" />
<input id="pltc" placeholder="Masukkan APIKEY Client (PLTC)" />
<input id="domain" placeholder="Masukkan Domain Panel (contoh: https://example.com)" />

<br>
<button onclick="hapusServer()">üöÄ Gas Bersihin Server Offline</button>

<div id="log"></div>
<div id="done"></div>

<script>
async function hapusServer() {
  const plta = document.getElementById('plta').value.trim();
  const pltc = document.getElementById('pltc').value.trim();
  const domain = document.getElementById('domain').value.trim();
  const log = document.getElementById('log');
  const done = document.getElementById('done');
  log.innerHTML = '';
  done.innerHTML = '';

  if (!plta || !pltc || !domain) {
    log.innerHTML = `<span class="fail">‚ùå Semua field wajib diisi.</span>`;
    return;
  }

  log.innerHTML = `<span class="info">‚è≥ Memulai proses pembersihan server...</span>\n`;

  try {
    const res = await fetch("https://candid-trifle-a2dbc3.netlify.app/netlify/functions/deleteOffline", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ plta, pltc, domain })
    });

    const rawText = await res.text();

    if (!rawText || rawText.trim() === "") {
      throw new Error("Respon kosong dari backend ‚ùå");
    }

    let data;
    try {
      data = JSON.parse(rawText);
    } catch (e) {
      throw new Error("‚ùå Respon bukan JSON valid:\n" + rawText);
    }

    if (data.error) {
      log.innerHTML += `<span class="fail">‚ùå ${data.error}</span>`;
      return;
    }

    (data.log || []).forEach(l => {
      if (l.includes("‚úÖ")) {
        log.innerHTML += `<span class="success">${l}</span>\n`;
      } else if (l.includes("‚ùå")) {
        log.innerHTML += `<span class="fail">${l}</span>\n`;
      } else {
        log.innerHTML += `<span class="info">${l}</span>\n`;
      }
    });

    done.innerHTML = `üéâ SELESAI BRO üéâ`;

    // Reset input
    document.getElementById('plta').value = '';
    document.getElementById('pltc').value = '';
    document.getElementById('domain').value = '';

  } catch (err) {
    log.innerHTML += `\n<span class="fail">‚ùå Error: ${err.message}</span>`;
  }
}
</script>

</body>
</html>
