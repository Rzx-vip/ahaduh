<!DOCTYPE html>
<html lang="id">
<head>
 <meta charset="UTF-8">
 <title>üßπ Bersihin Server Offline - Pterodactyl by RezzX</title>
 <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
 <style>
 body {
 background: #0f172a;
 color: #f1f5f9;
 font-family: 'Segoe UI', sans-serif;
 padding: 20px;
 }
 input, button {
 padding: 10px;
 margin: 5px 0;
 width: 100%;
 border-radius: 5px;
 border: none;
 }
 input {
 background: #1e293b;
 color: #fff;
 }
 button {
 background: #38bdf8;
 font-weight: bold;
 cursor: pointer;
 }
 button:hover {
 background: #0ea5e9;
 }
 .log {
 margin-top: 20px;
 background: #1e293b;
 padding: 10px;
 border-radius: 5px;
 max-height: 400px;
 overflow-y: auto;
 white-space: pre-wrap;
 }
 .done {
 text-align: center;
 font-size: 22px;
 font-weight: bold;
 background: linear-gradient(90deg, #22c55e, #facc15, #38bdf8, #f43f5e);
 -webkit-background-clip: text;
 -webkit-text-fill-color: transparent;
 animation: blink 1s infinite alternate;
 }
 @keyframes blink {
 0% { opacity: 1; }
 100% { opacity: 0.5; }
 }
 </style>
</head>
<body>

<h2>üßπ Pterodactyl Server Cleaner</h2>
<input id="domain" placeholder="üåê Domain Panel (https://panel.domain.com)">
<input id="plta" placeholder="üîë API Admin">
<input id="pltc" placeholder="üîê API Client">
<button onclick="gas()">üöÄ Gas!</button>

<div class="log" id="log"></div>
<div class="done" id="done"></div>

<script>
 async function gas() {
 const domain = document.getElementById("domain").value.trim();
 const plta = document.getElementById("plta").value.trim();
 const pltc = document.getElementById("pltc").value.trim();
 const log = document.getElementById("log");
 const done = document.getElementById("done");

 log.innerText = '';
 done.innerText = '';

 if (!domain || !plta || !pltc) {
 log.innerText = "‚ùå Semua input wajib diisi.";
 return;
 }

 try {
 const res = await axios.get(`${domain}/api/application/servers`, {
 headers: {
 "Authorization": `Bearer ${plta}`,
 "Accept": "application/json"
 }
 });

 const servers = res.data.data;
 let success = 0;

 for (const server of servers) {
 const sid = server.attributes.id;
 const uuid = server.attributes.uuid;
 const name = server.attributes.name || "-";
 const user = server.attributes.user;

 const stat = await axios.get(`${domain}/api/client/servers/${uuid}/resources`, {
 headers: { "Authorization": `Bearer ${pltc}` }
 });

 if (stat.data.attributes.current_state === "offline") {
 await axios.delete(`${domain}/api/application/servers/${sid}`, {
 headers: {
 "Authorization": `Bearer ${plta}`
 }
 });

 log.innerText += `‚úÖ Server ID ${sid} berhasil dihapus\nüìß User ID: ${user}\nüîñ Nama: ${name}\n\n`;
 success++;
 } else {
 log.innerText += `‚è© Server ID ${sid} aktif, dilewati...\n`;
 }
 }

 done.innerText = `üî•üî• SELESAI - Total berhasil: ${success} üî•üî•`;

 setTimeout(() => {
 document.getElementById("domain").value = '';
 document.getElementById("plta").value = '';
 document.getElementById("pltc").value = '';
 }, 3000);

 } catch (err) {
 log.innerText = `‚ùå Error: ${err.message}`;
 }
 }
</script>

</body>
</html>